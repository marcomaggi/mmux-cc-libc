@c mmux-cc-types-macros.texi --
@c
@c Permission is  granted to copy,  distribute and/or  modify this document  under the terms  of the
@c @gnu{}  Free Documentation  License, Version  1.3  or any  later  version published  by the  Free
@c Software  Foundation; with  Invariant Sections  being ``@gnu{}  Free Documentation  License'' and
@c ``@gnu{} Lesser  General Public License'',  no Front--Cover Texts,  and no Back--Cover  Texts.  A
@c copy of the license is included in the section entitled ``@gnu{} Free Documentation License''.

@c page
@c ------------------------------------------------------------
@c Local macros.
@c ------------------------------------------------------------

@ifinfo
@macro mmux{}
@acronym{MMUX}
@end macro
@end ifinfo

@ifnotinfo
@macro mmux{}
@acronym{mmux}
@end macro
@end ifnotinfo

@macro mmuxcctypesref{NODE, TITLE}
@ref{\NODE\,\TITLE\,\TITLE\,mmux-cc-types}
@end macro

@macro MmuxCFuncpage{FUNCNAME}
@ref{\FUNCNAME\,\FUNCNAME\,\FUNCNAME\,*manpages*}
@end macro

@macro MmuxCStruct{NAME}
@code{struct \NAME\}
@end macro

@c page
@c ------------------------------------------------------------
@c C function intefaces.
@c ------------------------------------------------------------


@macro MmuxCInterfaceTwo{FUNCNAME,MANPAGE}
Interface to the function @cfunc{\FUNCNAME\}, @MmuxCFuncpage{\MANPAGE\}
@end macro

@macro MmuxCInterface{FUNCNAME}
@MmuxCInterfaceTwo{\FUNCNAME\,\FUNCNAME\}
@end macro

@macro MmuxCInterfaceGlibc{FUNCNAME,GLIBCNODENAME}
Interface to the function @cfunc{\FUNCNAME\}, @glibcref{\GLIBCNODENAME\,\GLIBCNODENAME\}
@end macro

@macro MmuxCMacroInterfaceTwo{FUNCNAME,MANPAGE}
Interface to the preprocessor macro @cfunc{\FUNCNAME\}, @MmuxCFuncpage{\MANPAGE\}
@end macro

@macro MmuxCMacroInterface{FUNCNAME}
@MmuxCMacroInterfaceTwo{\FUNCNAME\,\FUNCNAME\}
@end macro

@c page
@c ------------------------------------------------------------
@c Data structures.
@c ------------------------------------------------------------

@macro MmuxCStructOpaqueTypedef{STRUCTNAME}
@deftp {Opaque Struct Typedef} mmux_libc_\STRUCTNAME\_t
An opaque alias for @MmuxCStruct{\STRUCTNAME\}.
@end deftp

@end macro

@c ------------------------------------------------------------------------

@macro MmuxCStructPointerOpaqueTypedef{STRUCTNAME}
@deftp {Opaque Struct Pointer Typedef} mmux_libc_\STRUCTNAME\_ptr_t
An opaque alias for @code{mmux_libc_\STRUCTNAME\_t *}.
@end deftp

@end macro

@c ------------------------------------------------------------------------

@macro MmuxSetterGetter{STRUCTNAME, FIELDNAME, FIELDTYPE}
@deftypefun bool mmux_libc_\FIELDNAME\_set (mmux_libc_\STRUCTNAME\_t * @var{\STRUCTNAME\_p}, \FIELDTYPE\ @var{\FIELDNAME\})
@deftypefunx bool mmux_libc_\FIELDNAME\_ref (\FIELDTYPE\ * @var{result_p}, mmux_libc_\STRUCTNAME\_t const * @var{\STRUCTNAME\_p})
Setter and getter for the field @code{\FIELDNAME\} of @objtype{mmux_libc_\STRUCTNAME\_t}.
@end deftypefun

@end macro

@c ------------------------------------------------------------------------

@macro MmuxStructDumper{STRUCTNAME}
@MmuxStructDumperTwo{\STRUCTNAME\,struct \STRUCTNAME\}
@end macro

@c ------------------------------------------------------------------------

@macro MmuxStructDumperTwo{STRUCTNAME,STRUCTTYPE}
@deftypefun bool mmux_libc_\STRUCTNAME\_dump (mmux_libc_fd_arg_t @var{fd}, mmux_libc_\STRUCTNAME\_t const * @var{struct_p}, mmux_asciizcp_t @var{struct_name})
Write to @var{fd} a description of the fields of the @MmuxCStruct{\STRUCTNAME\} referenced by
@var{struct_p}.  @var{struct_name} must be a pointer to an @MmuxAsciiZ{} string representing the name of
the data structure used in the description; when @cnull{}: it defaults to @samp{\STRUCTTYPE\}.
@end deftypefun

@end macro

@c page
@c ------------------------------------------------------------------------
@c Local macros: data structure wrappers.
@c ------------------------------------------------------------------------

@ignore

When we define C language types as follows:

  typedef struct mmux_libc_network_interface_name_index_t {
    struct if_nameindex
  } mmux_libc_network_interface_name_index_t;

  typedef mmux_libc_network_interface_name_index_t              mmux_libc_if_nameindex_t[1];
  typedef mmux_libc_network_interface_name_index_arg_t const *  mmux_libc_if_nameindex_t;

we want to document them as follows:

@MmuxCWrapperStructOpaqueTypedef{network_interface_name_index,if_nameindex}
@MmuxCWrapperStructArrayOneTypedef{if_nameindex,network_interface_name_index}
@MmuxCWrapperStructPointerTypedef{if_nameindex,network_interface_name_index}
@MmuxCWrapperStructSetterGetter{if_nameindex, if_index, mmux_uint_t}
@MmuxCWrapperStructSetterGetter{if_nameindex, if_name,  mmux_asciizcp_t}
@MmuxCWrapperStructDumper{if_nameindex,if_nameindex}

@end ignore

@macro MmuxCWrapperStructOpaqueTypedef{STRUCTNAME,STANDARDNAME}
@deftp {Opaque Struct Typedef} mmux_libc_\STRUCTNAME\_t
Data structure type aliasing the standard type @MmuxCStruct{\STANDARDNAME\}.
@end deftp

@end macro

@macro MmuxCWrapperStructWithParentOpaqueTypedef{STRUCTNAME,STANDARDNAME,PARENT}
@deftp {Opaque Struct Typedef} mmux_libc_\STRUCTNAME\_t
@deftpx {Parent Struct Typedef} \PARENT\
Data structure type aliasing the standard type @MmuxCStruct{\STANDARDNAME\}.
@end deftp

@end macro

@c ------------------------------------------------------------------------

@macro MmuxCWrapperStructArrayOneTypedef{ARRAYNAME,STRUCTNAME}
@deftp {Struct Pointer Typedef} mmux_libc_\ARRAYNAME\_t
Pointer type defined as follows:

@example
typedef mmux_libc_\STRUCTNAME\_t  mmux_\ARRAYNAME\_t[1];
@end example

@noindent
it is meant to be used to define local variables and for arguments to functions representing the
result of a computation, so the referenced @objtype{mmux_libc_\STRUCTNAME\_t} must be mutable.
@end deftp

@end macro

@c ------------------------------------------------------------------------

@macro MmuxCWrapperStructPointerTypedef{POINTERNAME,STRUCTNAME}
@deftp {Struct Pointer Typedef} mmux_libc_\POINTERNAME\_arg_t
Pointer type defined as follows:

@example
typedef mmux_libc_\STRUCTNAME\_t const *  mmux_\POINTERNAME\_arg_t;
@end example

@noindent
it is meant to be used to declare arguments to functions representing an input parameter, so the
referenced @objtype{mmux_libc_\STRUCTNAME\_t} is handled as immutable.
@end deftp

@end macro

@c ------------------------------------------------------------------------

@macro MmuxCWrapperStructSetterGetter{PTRNAME, FIELDNAME, FIELDTYPE}
@deftypefun bool mmux_libc_\FIELDNAME\_set (mmux_libc_\PTRNAME\_t @var{\PTRNAME\}, \FIELDTYPE\ @var{\FIELDNAME\})
@deftypefunx bool mmux_libc_\FIELDNAME\_ref (\FIELDTYPE\ * @var{\FIELDNAME\_result_p}, mmux_libc_\PTRNAME\_arg_t @var{\PTRNAME\})
Setter and getter for the field @code{\FIELDNAME\} of @objtype{mmux_libc_\PTRNAME\_t}.
@end deftypefun

@end macro

@c ------------------------------------------------------------------------

@macro MmuxCWrapperStructDumper{PTRNAME,STANDARDNAME}
@deftypefun bool mmux_libc_\PTRNAME\_dump (mmux_libc_fd_arg_t @var{fd}, mmux_libc_\PTRNAME\_arg_t @var{\PTRNAME\}, mmux_asciizcp_t @var{struct_name})
Write to @var{fd} a description of the fields of the @MmuxCStruct{\STANDARDNAME\} referenced by
@var{\PTRNAME\}.  @var{struct_name} must be a pointer to an @MmuxAsciiZ{} string representing the
name of the data structure used in the description; when @cnull{}: it defaults to @samp{struct
\STANDARDNAME\}.
@end deftypefun

@end macro


@c Local Variables:
@c mode: texinfo
@c TeX-master: "mmux-cc-libc"
@c End:
